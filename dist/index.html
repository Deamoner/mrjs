<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>MR.js</title>
    <meta name="description" content="MR.js example">
    <script src="./build.js"></script>


  </head>
  <body >
    <mr-app debug="true">
        <mr-volume scale="0.5" position="0 0 -0.6">
            <mr-container  width="0.5" height="0.666" snap-to="left">
                <mr-panel corner-radius="0.02">
                    <mr-texteditor src="dev" text-style="size: 0.02; vertical: top">
                    </mr-texteditor>
                </mr-panel>
            </mr-container>
    
            <mr-entity id="dev" snap-to="back">
<mr-container width="1.333" height="1">
    <mr-row>
        <mr-panel id="panel1" width="0.25" margin="0 0.02 0 0"></mr-panel>

        <mr-panel id="panel2" corner-radius="0.02" width="0.75">
        </mr-panel>
    </mr-row>
</mr-container>
            </mr-entity>
        </mr-volume>
        
    </mr-app>
  </body>

  <footer>
    <script type="module">

        let panels = document.querySelectorAll('mr-panel')

        console.log(panels);

        for( const panel of panels) {
            if (!panel.id) { continue }
            panel.onGrab = (position) => {

                let localPosition = panel.object3D.parent.worldToLocal(new THREE.Vector3(position.x, position.y, position.z))
                console.log(localPosition);
                panel.setAttribute('position', `${localPosition.x} ${localPosition.y} ${localPosition.z}`)
            }

        }

        document.addEventListener('grab', (event) => {
            console.log('grab');
        })
    </script>
  </footer>
</html>